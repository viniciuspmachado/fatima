{"version":3,"sources":["views/ui/login.js"],"names":["Login","props","onUserChange","event","setState","user","target","value","onPassChange","pass","paginaPrincipal","window","location","replace","process","state","rota","reload","onSubmitSignIn","a","error","trim","onMudaTitulo","onMudaMessagem","onMudaLink","toggle","fetch","method","headers","body","JSON","stringify","then","response","json","usuario","login","sessionStorage","setItem","nome","split","perm","getItem","message","t_message","modal","bind","this","mess","className","isOpen","backdrop","color","onClick","for","type","name","id","placeholder","onChange","to","React","Component"],"mappings":"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","file":"static/js/9.f6d036c8.chunk.js","sourcesContent":["import React from 'react';\r\n/* import {\r\n  MDBContainer,\r\n  MDBInput,\r\n  MDBCheckbox,\r\n  MDBBtn,\r\n  MDBIcon\r\n}\r\nfrom 'mdb-react-ui-kit'; */\r\nimport '../../../src/assets/scss/login.css';\r\nimport { Label, Button, Modal, Form, FormGroup, Input, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\";\r\nimport { Link} from \"react-router-dom\";\r\n\r\nclass Login extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n        user: '',\r\n        pass: '',\r\n        rota: '',\r\n        message: '',\r\n        t_message: '',\r\n        modal: false\r\n    }\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n  };\r\n\r\n  \r\n  toggle() {\r\n    this.setState({\r\n      modal: !this.state.modal\r\n    });\r\n  }\r\n\r\n  onUserChange = (event) => {\r\n    this.setState({user: event.target.value})\r\n  };\r\n\r\n  onPassChange = (event) => {\r\n    this.setState({pass: event.target.value})\r\n  };\r\n\r\n  paginaPrincipal = () => {\r\n    //alert(this.state.rota);\r\n    window.location.replace (process.env.REACT_APP_SERVER_APP+this.state.rota);\r\n    window.location.reload();\r\n    //window.open(this.state.rota,\"_self\");\r\n  }\r\n\r\n  onMudaMessagem (mess) {\r\n    this.setState((state) => {\r\n      // Importante: use `state` em vez de `this.state` quando estiver atualizando.\r\n      return {message: mess}\r\n    });\r\n  };\r\n\r\n  onMudaTitulo (mess) {\r\n    this.setState((state) => {\r\n      // Importante: use `state` em vez de `this.state` quando estiver atualizando.\r\n      return {t_message: mess}\r\n    });\r\n  };\r\n\r\n  onMudaLink (mess) {\r\n    this.setState((state) => {\r\n      // Importante: use `state` em vez de `this.state` quando estiver atualizando.\r\n      return {rota: mess}\r\n    });\r\n  };\r\n\r\n  onSubmitSignIn = async () => {\r\n  \r\n    let error = 0;\r\n  \r\n    if(this.state.user.trim() === ''){\r\n      //alert(\"Por favor, digite o nome de usuário!\");\r\n      this.onMudaTitulo(\"Erro!\");\r\n      this.onMudaMessagem(\"Por favor, digite o nome de usuário!\");\r\n      this.onMudaLink('/#/login');\r\n      error = 1;\r\n      this.toggle();\r\n    } \r\n    \r\n    if(this.state.pass.trim() === ''){\r\n      //alert(\"Por favor, digite a senha\");\r\n      this.onMudaTitulo(\"Erro!\");\r\n      this.onMudaMessagem(\"Por favor, digite a senha!\");\r\n      this.onMudaLink('/#/login');\r\n      error = 1;\r\n      this.toggle();\r\n    } \r\n   \r\n    if (error === 0){\r\n      \r\n      await fetch(process.env.REACT_APP_SERVER_TZ+'/signin', {\r\n          method: 'post',\r\n          headers: {'Content-Type': 'application/json'},\r\n          body: JSON.stringify({\r\n              user: this.state.user,\r\n              pass: this.state.pass,\r\n          })\r\n      })\r\n          //.then(alert(\"Bem vindo!\"))\r\n          .then(response => response.json())\r\n          .then (usuario => {\r\n            //alert(usuario.login);\r\n            if (usuario.login){\r\n              sessionStorage.setItem('nomez',usuario.nome.split(' ')[0])\r\n              sessionStorage.setItem('permz',usuario.perm)\r\n              this.onMudaTitulo(\"Sucesso!\");\r\n              this.onMudaMessagem('Bem vindo '+sessionStorage.getItem('nomez'));\r\n              this.onMudaLink('/#/');\r\n              this.toggle();\r\n              //alert('Bem vindo '+sessionStorage.getItem('nomez'));\r\n              //await(2000); \r\n              //window.open(\"/\",\"_self\")\r\n            } else {\r\n              //alert(usuario);\r\n              this.onMudaTitulo(\"Erro!\");\r\n              this.onMudaMessagem(usuario);\r\n              this.onMudaLink('/#/login');\r\n              this.toggle();\r\n              //window.open(\"/login\",\"_self\")\r\n              \r\n              //alert('Não Entrou e vai para: '+this.state.rota);\r\n            }\r\n          })\r\n          \r\n    }\r\n  }\r\n  \r\n  render() {\r\n    \r\n  return (\r\n      <div className=\"App\">\r\n          \r\n          <div>\r\n            <Modal isOpen={this.state.modal} toggle={this.toggle} className={this.props.className} backdrop=\"static\">\r\n              <ModalHeader toggle={this.toggle}>{this.state.t_message}</ModalHeader>\r\n              <ModalBody>\r\n                {this.state.message}\r\n              </ModalBody>\r\n              <ModalFooter>\r\n                <Button color=\"primary\" onClick={this.paginaPrincipal}>OK</Button>{' '}\r\n              </ModalFooter>\r\n            </Modal>\r\n          </div>\r\n\r\n          <h2>Iniciar Sessão</h2>\r\n          <Form className=\"form\">\r\n            <FormGroup>\r\n              <Label for=\"exampleEmail\">Usuário</Label>\r\n              <Input\r\n                type=\"user\"\r\n                name=\"user\"\r\n                id=\"user\"\r\n                placeholder=\"usuário\"\r\n                onChange={this.onUserChange}\r\n              />\r\n            </FormGroup>\r\n            <FormGroup>\r\n              <Label for=\"examplePassword\">Senha</Label>\r\n              <Input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                id=\"examplePassword\"\r\n                placeholder=\"********\"\r\n                onChange={this.onPassChange}\r\n              />\r\n            </FormGroup>\r\n            \r\n          <Link to={this.state.rota} className=\"btn btn-primary\" onClick={this.onSubmitSignIn} >Entrar</Link>\r\n          &nbsp;&nbsp;&nbsp;\r\n          <Link to='/caduser' className=\"btn btn-primary\">Solicitar Cadastro</Link>\r\n          &nbsp;&nbsp;&nbsp;\r\n          <Link to={this.state.rota}>Solicitar Nova Senha</Link>\r\n        </Form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;"],"sourceRoot":""}